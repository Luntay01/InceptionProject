FROM debian:buster

#php: This is the core PHP package, which includes the PHP language and interpreter. It allows you to run PHP scripts, which is essential for running a WordPress site.
#php-mysql: This extension allows PHP to communicate with MySQL databases. It's necessary for WordPress to interact with the MariaDB database.
#php-cli: The PHP Command Line Interface is used for running PHP scripts from the command line. It's useful for administrative tasks and running WP-CLI commands.
#php-mbstring: This is a PHP extension for handling multibyte string operations. It's important for processing non-ASCII characters in PHP scripts, 
#-which can be useful for internationalization.
#php-fpm: PHP FastCGI Process Manager (FPM) is an alternative PHP FastCGI implementation. It provides features useful for websites of any size, 
#-especially busy sites, by managing pools of PHP worker processes.
#php-gettext: This extension allows PHP to support gettext, which is used for internationalizing PHP applications. It helps in translating PHP applications.
#wget: This is a command-line utility for downloading files from the web. It's useful for fetching external resources during the setup of your container.
RUN apt update -yq && \
    apt upgrade -yq && \
    apt install -yq php && \
	apt install -yq php-mysql && \
	apt install -yq php-cli && \
	apt install -yq php-mbstring && \
	apt install -yq php-fpm && \
	apt install -yq php-gettext && \
	apt install -yq mariadb-client && \
	apt install -yq wget && \
    rm -rf /etc/php/7.3/fpm/pool.d/www.conf && \
    mkdir -p /run/php

COPY ./conf/www.conf /etc/php/7.3/fpm/pool.d/
COPY ./tools/run.sh /tmp/

RUN chmod +x /tmp/run.sh

ENTRYPOINT [ "sh", "/tmp/run.sh" ]
